# 네트워크 프로그래밍의 모든 것

안녕하세요! 오늘부터 네트워크의 세계로 깊이 들어가볼까요? 우리가 매일 사용하는 인터넷, 웹 서비스, 채팅 앱... 이 모든 것의 기반이 되는 네트워크 프로토콜의 원리를 함께 알아보겠습니다.

## 왜 네트워크를 이해해야 할까요?

여러분이 백엔드 개발자라면, 네트워크는 피할 수 없는 주제입니다. API를 설계하고, 마이크로서비스를 구축하고, 성능을 최적화하려면 네트워크가 어떻게 동작하는지 정확히 알아야 하죠.

제가 실무에서 경험한 바로는, 네트워크를 제대로 이해하지 못해서 발생하는 문제가 정말 많았습니다. 타임아웃은 왜 발생하는지, 왜 특정 상황에서 연결이 끊기는지, 왜 갑자기 응답이 느려지는지... 이런 문제들을 해결하려면 네트워크의 기본 원리를 알아야 합니다.

## OSI 7계층 vs TCP/IP 4계층

네트워크를 이야기할 때 빠질 수 없는 것이 바로 계층 모델이죠. 학교에서는 OSI 7계층을 배우지만, 실제로는 TCP/IP 4계층 모델이 더 많이 사용됩니다.

### TCP/IP 4계층 모델

```
4. 응용 계층 (Application Layer)
   - HTTP, HTTPS, FTP, SSH, DNS
   - 우리가 만드는 애플리케이션이 동작하는 계층

3. 전송 계층 (Transport Layer)  
   - TCP, UDP
   - 신뢰성 있는 데이터 전송을 담당

2. 인터넷 계층 (Internet Layer)
   - IP, ICMP, ARP
   - 패킷 라우팅과 주소 지정

1. 네트워크 인터페이스 계층 (Network Interface Layer)
   - Ethernet, Wi-Fi
   - 물리적 데이터 전송
```

각 계층은 독립적으로 동작하면서도 서로 협력합니다. 마치 레고 블록처럼 각 계층이 자신의 역할을 충실히 수행하면서 전체 시스템을 구성하는 거죠.

## TCP와 UDP: 전송 계층의 두 주인공

### TCP (Transmission Control Protocol)

TCP는 신뢰성 있는 데이터 전송을 보장하는 프로토콜입니다. 제가 좋아하는 비유는 "등기우편"이에요. 상대방이 편지를 받았는지 확인하고, 순서대로 도착하도록 보장하죠.

**TCP의 핵심 특징:**
- **연결 지향적**: 3-way handshake로 연결 수립
- **신뢰성 보장**: 패킷 손실 시 재전송
- **순서 보장**: 패킷이 순서대로 도착
- **흐름 제어**: 수신자의 처리 속도에 맞춰 전송
- **혼잡 제어**: 네트워크 상황에 따라 전송 속도 조절

### UDP (User Datagram Protocol)

UDP는 TCP와 달리 "일반우편" 같은 프로토콜입니다. 빠르지만 도착을 보장하지 않죠.

**UDP의 핵심 특징:**
- **비연결성**: 연결 수립 과정 없음
- **신뢰성 미보장**: Best-effort delivery
- **순서 미보장**: 패킷이 순서대로 도착하지 않을 수 있음
- **낮은 오버헤드**: 헤더가 단순하고 가벼움
- **실시간성**: 지연이 적음

## HTTP: 웹의 기반 프로토콜

HTTP는 우리가 가장 많이 사용하는 응용 계층 프로토콜입니다. 웹 브라우저와 서버가 대화하는 언어라고 생각하면 됩니다.

### HTTP의 진화

```
HTTP/0.9 (1991)
└─> HTTP/1.0 (1996)
    └─> HTTP/1.1 (1997)
        └─> HTTP/2 (2015)
            └─> HTTP/3 (2020)
```

각 버전마다 성능과 기능이 크게 개선되었습니다. 특히 HTTP/2의 멀티플렉싱과 HTTP/3의 QUIC 프로토콜은 웹 성능을 혁신적으로 개선했죠.

## 소켓 프로그래밍: 네트워크의 기본

소켓은 네트워크 통신의 끝점(endpoint)입니다. 프로세스가 네트워크를 통해 데이터를 주고받을 수 있게 해주는 인터페이스죠.

### 소켓의 종류

1. **TCP 소켓 (SOCK_STREAM)**
   - 연결 지향적
   - 신뢰성 있는 바이트 스트림

2. **UDP 소켓 (SOCK_DGRAM)**
   - 비연결성
   - 데이터그램 단위 전송

3. **Raw 소켓 (SOCK_RAW)**
   - 저수준 네트워크 접근
   - 패킷 스니핑, 커스텀 프로토콜 구현

## 실무에서 마주치는 네트워크 이슈들

### 1. Connection Timeout vs Read Timeout

제가 실무에서 가장 많이 겪은 문제 중 하나입니다.

- **Connection Timeout**: 연결 수립 시간 제한
- **Read Timeout**: 데이터 읽기 대기 시간 제한

적절한 타임아웃 설정이 없으면 시스템이 무한정 대기하거나, 너무 빨리 포기하는 문제가 발생합니다.

### 2. Keep-Alive와 Connection Pooling

HTTP/1.1의 Keep-Alive는 연결을 재사용해서 성능을 향상시킵니다. 하지만 제대로 관리하지 않으면 연결이 고갈되는 문제가 발생할 수 있죠.

### 3. NAT와 방화벽

기업 네트워크에서는 NAT(Network Address Translation)와 방화벽이 필수입니다. 이들이 어떻게 동작하는지 모르면 "로컬에서는 되는데 배포하면 안 되는" 문제를 겪게 됩니다.

## 네트워크 디버깅 도구들

네트워크 문제를 해결하려면 적절한 도구를 사용해야 합니다:

- **tcpdump/Wireshark**: 패킷 캡처 및 분석
- **netstat/ss**: 네트워크 연결 상태 확인
- **curl/wget**: HTTP 요청 테스트
- **nslookup/dig**: DNS 조회
- **traceroute**: 경로 추적
- **iperf**: 대역폭 측정

## 최신 네트워크 트렌드

### QUIC과 HTTP/3

구글이 개발한 QUIC은 UDP 기반으로 TCP의 신뢰성과 TLS의 보안을 제공합니다. HTTP/3는 이 QUIC을 사용해서 더 빠른 웹을 구현하죠.

### gRPC와 Protocol Buffers

REST API의 대안으로 떠오른 gRPC는 HTTP/2 기반으로 더 효율적인 통신을 제공합니다.

### WebSocket과 Server-Sent Events

실시간 통신을 위한 프로토콜들입니다. 채팅, 실시간 알림 등에 필수적이죠.

## 네트워크 보안의 기초

### TLS/SSL

HTTPS의 'S'가 바로 TLS/SSL입니다. 암호화된 통신을 제공하죠.

- **대칭키 암호화**: 빠르지만 키 교환이 문제
- **비대칭키 암호화**: 안전하지만 느림
- **TLS 핸드셰이크**: 두 방식을 조합

### 네트워크 공격 유형

- **DDoS**: 대량의 트래픽으로 서비스 마비
- **Man-in-the-Middle**: 중간자 공격
- **SYN Flooding**: TCP 연결 과정 악용
- **DNS Spoofing**: DNS 응답 조작

## 다음 단계

이제 네트워크의 기본을 이해하셨나요? advanced 폴더에서는 더 깊은 주제들을 다룹니다:

1. **TCP 심화**: 3-way handshake, 슬라이딩 윈도우, 혼잡 제어 알고리즘
2. **HTTP 완벽 이해**: HTTP/1.1 vs HTTP/2 vs HTTP/3, 캐싱, 쿠키와 세션
3. **소켓 프로그래밍**: 동기 vs 비동기, 블로킹 vs 논블로킹, epoll/kqueue
4. **네트워크 성능 최적화**: 지연 시간 줄이기, 대역폭 활용, CDN 활용
5. **보안 네트워크**: TLS 심화, VPN, Zero Trust Network

## 마무리

네트워크는 모든 현대 애플리케이션의 기반입니다. 클라우드, 마이크로서비스, IoT... 이 모든 것이 네트워크 위에서 동작하죠.

제가 10년 넘게 백엔드 개발을 하면서 느낀 것은, 네트워크를 제대로 이해하면 문제 해결 능력이 크게 향상된다는 것입니다. "왜 안 되지?"에서 "아, 이래서 안 되는구나!"로 바뀌는 순간을 경험하실 수 있을 거예요.

자, 이제 네트워크의 깊은 바다로 다이빙할 준비가 되셨나요? 🌊