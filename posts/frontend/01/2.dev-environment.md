# 2강: 현대적 개발 환경 구축

## 🎯 학습 목표
- Vite를 사용해서 현대적인 React 프로젝트를 생성할 수 있다
- TypeScript를 처음부터 설정하고 활용할 수 있다
- ESLint와 Prettier로 코드 품질을 관리할 수 있다
- Git과 GitHub을 활용한 버전 관리를 할 수 있다

---

## 🤔 왜 Create React App 대신 Vite를 써야 할까?

### Create React App의 문제점
```bash
# 😢 CRA - 느리고 무거운 개발 경험
npx create-react-app my-app
cd my-app
npm start  # 🐌 30초 이상 걸림, HMR도 느림
```

**CRA의 단점:**
- 🐌 **느린 시작**: 개발 서버 실행까지 30초+
- 🐌 **느린 HMR**: 파일 변경 시 반영 시간 2-3초
- 📦 **무거운 번들**: 불필요한 도구들이 포함
- 🔒 **설정 제한**: eject 하지 않으면 커스터마이징 어려움
- 📉 **중단된 개발**: Facebook이 더 이상 적극적으로 관리하지 않음

### Vite의 장점
```bash
# 😍 Vite - 빠르고 현대적인 개발 경험
npm create vite@latest my-react-app -- --template react-ts
cd my-react-app
npm install
npm run dev  # ⚡ 1-2초 만에 실행, 즉시 반영
```

**Vite의 장점:**
- ⚡ **빠른 시작**: 개발 서버 1-2초 만에 실행
- ⚡ **즉시 HMR**: 파일 변경이 밀리초 단위로 반영
- 🎯 **ES 모듈 활용**: 브라우저 네이티브 ES 모듈 사용
- 🛠️ **유연한 설정**: 간단한 설정 파일로 커스터마이징
- 🔧 **현대적 도구**: ESBuild, Rollup 등 최신 도구 활용

---

## 🚀 Vite 프로젝트 생성하기

### 1단계: Vite 프로젝트 생성

```bash
# TypeScript React 템플릿으로 생성
npm create vite@latest my-awesome-app -- --template react-ts

# 또는 대화형으로 생성
npm create vite@latest my-awesome-app
# ✔ Select a framework: › React
# ✔ Select a variant: › TypeScript

cd my-awesome-app
npm install
```

### 2단계: 프로젝트 구조 확인

```
my-awesome-app/
├── public/
│   └── vite.svg
├── src/
│   ├── assets/
│   ├── App.css
│   ├── App.tsx        # 😍 처음부터 TypeScript!
│   ├── index.css
│   └── main.tsx
├── index.html
├── package.json
├── tsconfig.json      # TypeScript 설정
├── tsconfig.node.json
└── vite.config.ts     # Vite 설정
```

### 3단계: 개발 서버 실행

```bash
npm run dev
# ⚡ VITE v5.0.0  ready in 200ms
# ➜  Local:   http://localhost:5173/
# ➜  Network: use --host to expose
```

**와우! 200ms만에 실행됐습니다!** 🎉

---

## 📝 TypeScript 완전 정복

### 왜 TypeScript를 써야 할까?

**JavaScript의 문제점:**
```javascript
// 😢 런타임에 발견되는 에러
function calculateTotal(items) {
  return items.reduce((sum, item) => sum + item.price, 0);
}

calculateTotal("not an array"); // 💥 TypeError!
calculateTotal([{ name: "Apple" }]); // 💥 NaN (price가 없음)
```

**TypeScript의 해결책:**
```typescript
// 😍 개발 시점에 에러를 잡아줌
interface Item {
  id: number;
  name: string;
  price: number;
}

function calculateTotal(items: Item[]): number {
  return items.reduce((sum, item) => sum + item.price, 0);
}

// ❌ TypeScript 에러로 미리 방지
calculateTotal("not an array"); // Type Error!
calculateTotal([{ name: "Apple" }]); // Property 'price' is missing!
```

### React + TypeScript 기본 패턴

```typescript
// 📁 types/index.ts
export interface User {
  id: number;
  name: string;
  email: string;
  isActive: boolean;
}

export interface ApiResponse<T> {
  data: T;
  message: string;
  status: 'success' | 'error';
}

// 📁 components/UserCard.tsx
import { User } from '../types';

interface UserCardProps {
  user: User;
  onEdit?: (user: User) => void;
  onDelete?: (id: number) => void;
  className?: string;
}

// 😍 Props 타입 안전성 보장
const UserCard: React.FC<UserCardProps> = ({ 
  user, 
  onEdit, 
  onDelete, 
  className = '' 
}) => {
  const handleEdit = () => {
    onEdit?.(user); // optional chaining
  };

  const handleDelete = () => {
    onDelete?.(user.id);
  };

  return (
    <div className={`user-card ${className}`}>
      <h3>{user.name}</h3>
      <p>{user.email}</p>
      <span className={`status ${user.isActive ? 'active' : 'inactive'}`}>
        {user.isActive ? 'Active' : 'Inactive'}
      </span>
      
      <div className="actions">
        <button onClick={handleEdit}>Edit</button>
        <button onClick={handleDelete}>Delete</button>
      </div>
    </div>
  );
};

export default UserCard;

// 📁 hooks/useUsers.ts
import { useState, useEffect } from 'react';
import { User, ApiResponse } from '../types';

export const useUsers = () => {
  const [users, setUsers] = useState<User[]>([]);
  const [loading, setLoading] = useState<boolean>(true);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    const fetchUsers = async () => {
      try {
        const response = await fetch('/api/users');
        const result: ApiResponse<User[]> = await response.json();
        
        if (result.status === 'success') {
          setUsers(result.data);
        } else {
          setError(result.message);
        }
      } catch (err) {
        setError(err instanceof Error ? err.message : 'Unknown error');
      } finally {
        setLoading(false);
      }
    };

    fetchUsers();
  }, []);

  const updateUser = (updatedUser: User) => {
    setUsers(prev => 
      prev.map(user => 
        user.id === updatedUser.id ? updatedUser : user
      )
    );
  };

  const deleteUser = (id: number) => {
    setUsers(prev => prev.filter(user => user.id !== id));
  };

  return { users, loading, error, updateUser, deleteUser };
};
```

---

## 🔧 ESLint + Prettier 설정

### 왜 필요할까?

**코드 품질 문제:**
```javascript
// 😢 일관성 없는 코드
function getUserInfo(id){
const user=users.find(u=>u.id===id)
if(user){
return user
}
return null;
}
```

**ESLint + Prettier 적용 후:**
```typescript
// 😍 일관성 있고 깔끔한 코드
function getUserInfo(id: number): User | null {
  const user = users.find((u) => u.id === id);
  
  if (user) {
    return user;
  }
  
  return null;
}
```

### 설치 및 설정

```bash
# ESLint와 Prettier 설치
npm install -D eslint @typescript-eslint/eslint-plugin @typescript-eslint/parser
npm install -D prettier eslint-config-prettier eslint-plugin-prettier
npm install -D @vitejs/plugin-react

# React 관련 ESLint 플러그인
npm install -D eslint-plugin-react eslint-plugin-react-hooks
```

### .eslintrc.json 설정

```json
{
  "env": {
    "browser": true,
    "es2020": true
  },
  "extends": [
    "eslint:recommended",
    "@typescript-eslint/recommended",
    "plugin:react/recommended",
    "plugin:react-hooks/recommended",
    "plugin:prettier/recommended"
  ],
  "parser": "@typescript-eslint/parser",
  "parserOptions": {
    "ecmaVersion": "latest",
    "sourceType": "module",
    "ecmaFeatures": {
      "jsx": true
    }
  },
  "plugins": [
    "react",
    "react-hooks",
    "@typescript-eslint"
  ],
  "rules": {
    "react/react-in-jsx-scope": "off",
    "@typescript-eslint/no-unused-vars": "error",
    "prefer-const": "error"
  },
  "settings": {
    "react": {
      "version": "detect"
    }
  }
}
```

### .prettierrc.json 설정

```json
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": true,
  "printWidth": 80,
  "tabWidth": 2,
  "useTabs": false
}
```

### VS Code 설정

```json
// .vscode/settings.json
{
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": "explicit"
  },
  "typescript.preferences.importModuleSpecifier": "relative"
}
```

---

## 🎯 Git + GitHub 워크플로우

### 프로젝트 초기화

```bash
# Git 저장소 초기화
git init
git add .
git commit -m "🎉 Initial commit with Vite + TypeScript"

# GitHub 저장소 연결
git branch -M main
git remote add origin https://github.com/yourusername/my-awesome-app.git
git push -u origin main
```

### .gitignore 설정

```gitignore
# Dependencies
node_modules/
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# Production build
dist/
build/

# Environment variables
.env
.env.local
.env.development.local
.env.test.local
.env.production.local

# IDE
.vscode/
.idea/

# OS
.DS_Store
Thumbs.db

# Logs
logs/
*.log
```

### 유용한 Git 커밋 컨벤션

```bash
# 타입별 커밋 메시지
git commit -m "✨ feat: 사용자 프로필 컴포넌트 추가"
git commit -m "🐛 fix: 로그인 버튼 클릭 에러 수정"
git commit -m "💄 style: 헤더 컴포넌트 스타일 개선"
git commit -m "♻️ refactor: API 호출 로직 개선"
git commit -m "📝 docs: README 파일 업데이트"
git commit -m "🚀 deploy: Vercel 배포 설정"
```

---

## 🎯 실습: 완전한 개발 환경 구축

### 단계별 실습

```bash
# 1. 새 Vite 프로젝트 생성
npm create vite@latest react-todo-app -- --template react-ts
cd react-todo-app
npm install

# 2. 추가 패키지 설치
npm install -D eslint @typescript-eslint/eslint-plugin @typescript-eslint/parser
npm install -D prettier eslint-config-prettier eslint-plugin-prettier
npm install -D eslint-plugin-react eslint-plugin-react-hooks

# 3. 설정 파일 생성 (위의 설정들 참고)

# 4. 샘플 컴포넌트 작성
```

### 샘플 Todo 컴포넌트

```typescript
// 📁 src/types/todo.ts
export interface Todo {
  id: number;
  text: string;
  completed: boolean;
  createdAt: Date;
}

// 📁 src/components/TodoItem.tsx
import { Todo } from '../types/todo';

interface TodoItemProps {
  todo: Todo;
  onToggle: (id: number) => void;
  onDelete: (id: number) => void;
}

const TodoItem: React.FC<TodoItemProps> = ({ todo, onToggle, onDelete }) => {
  return (
    <div className={`todo-item ${todo.completed ? 'completed' : ''}`}>
      <input
        type="checkbox"
        checked={todo.completed}
        onChange={() => onToggle(todo.id)}
      />
      <span className="todo-text">{todo.text}</span>
      <button onClick={() => onDelete(todo.id)}>삭제</button>
    </div>
  );
};

export default TodoItem;

// 📁 src/App.tsx
import { useState } from 'react';
import { Todo } from './types/todo';
import TodoItem from './components/TodoItem';
import './App.css';

function App() {
  const [todos, setTodos] = useState<Todo[]>([]);
  const [inputText, setInputText] = useState('');

  const addTodo = () => {
    if (inputText.trim()) {
      const newTodo: Todo = {
        id: Date.now(),
        text: inputText,
        completed: false,
        createdAt: new Date(),
      };
      setTodos([...todos, newTodo]);
      setInputText('');
    }
  };

  const toggleTodo = (id: number) => {
    setTodos(todos.map(todo => 
      todo.id === id ? { ...todo, completed: !todo.completed } : todo
    ));
  };

  const deleteTodo = (id: number) => {
    setTodos(todos.filter(todo => todo.id !== id));
  };

  return (
    <div className="app">
      <h1>Modern Todo App</h1>
      
      <div className="input-section">
        <input
          type="text"
          value={inputText}
          onChange={(e) => setInputText(e.target.value)}
          placeholder="새 할 일을 입력하세요..."
          onKeyPress={(e) => e.key === 'Enter' && addTodo()}
        />
        <button onClick={addTodo}>추가</button>
      </div>

      <div className="todos">
        {todos.map((todo) => (
          <TodoItem
            key={todo.id}
            todo={todo}
            onToggle={toggleTodo}
            onDelete={deleteTodo}
          />
        ))}
      </div>
      
      <div className="stats">
        총 {todos.length}개, 완료 {todos.filter(t => t.completed).length}개
      </div>
    </div>
  );
}

export default App;
```

---

## ✅ 체크포인트

이 강의를 완료했다면 다음을 할 수 있어야 합니다:

- [ ] Vite로 TypeScript React 프로젝트 생성
- [ ] TypeScript 타입 정의와 컴포넌트 작성
- [ ] ESLint + Prettier 설정으로 코드 품질 관리
- [ ] Git으로 버전 관리 및 GitHub 연동
- [ ] 현대적인 개발 환경에서 개발 경험

## 💡 Pro Tips

1. **VS Code 확장 프로그램 추천:**
   - ES7+ React/Redux/React-Native snippets
   - TypeScript Importer
   - Prettier - Code formatter
   - ESLint

2. **개발 속도 향상 단축키:**
   - `rafce` → React Arrow Function Component with Export
   - `useState` → import와 함께 자동 완성
   - `Ctrl/Cmd + .` → Quick Fix (ESLint 에러 자동 수정)

## 🔗 다음 강의 미리보기

다음 강의에서는 **React 핵심 개념**을 배워보겠습니다:
- CSR vs SSR vs SSG 렌더링 방식 이해
- JSX와 컴포넌트 기반 아키텍처
- Props와 State 완전 정복

현대적인 개발 환경을 갖췄으니 이제 React의 핵심을 파헤쳐봅시다! 🚀