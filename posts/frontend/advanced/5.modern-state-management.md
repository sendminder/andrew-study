# 5ê°•: ëª¨ë˜ ìƒíƒœ ê´€ë¦¬ - Zustandì™€ íŒ¨í„´ë“¤

## ğŸ¯ í•™ìŠµ ëª©í‘œ
- Reduxì˜ ë³µì¡í•¨ê³¼ Zustandì˜ ê°„ë‹¨í•¨ì„ ë¹„êµí•  ìˆ˜ ìˆë‹¤
- Zustandë¡œ ì „ì—­ ìƒíƒœë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤
- Context APIì™€ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì°¨ì´ì ì„ ì´í•´í•œë‹¤
- Props Drilling ë¬¸ì œë¥¼ ì™„ì „íˆ í•´ê²°í•  ìˆ˜ ìˆë‹¤
- Container/Presentational íŒ¨í„´ì„ í™œìš©í•  ìˆ˜ ìˆë‹¤

---

## ğŸ¤” ì™œ Redux ëŒ€ì‹  Zustandë¥¼ ì¨ì•¼ í• ê¹Œ?

### Reduxì˜ ë³µì¡í•¨

```javascript
// ğŸ˜¢ Redux - ë„ˆë¬´ ë§ì€ ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œ
// 1. Actions
const INCREMENT = 'counter/increment';
const DECREMENT = 'counter/decrement';
const SET_USER = 'user/setUser';

const increment = () => ({ type: INCREMENT });
const decrement = () => ({ type: DECREMENT });
const setUser = (user) => ({ type: SET_USER, payload: user });

// 2. Reducers
const initialState = {
  counter: {
    value: 0
  },
  user: {
    name: '',
    email: ''
  }
};

function counterReducer(state = initialState.counter, action) {
  switch (action.type) {
    case INCREMENT:
      return { ...state, value: state.value + 1 };
    case DECREMENT:
      return { ...state, value: state.value - 1 };
    default:
      return state;
  }
}

function userReducer(state = initialState.user, action) {
  switch (action.type) {
    case SET_USER:
      return { ...state, ...action.payload };
    default:
      return state;
  }
}

// 3. Store ì„¤ì •
import { createStore, combineReducers } from 'redux';
const rootReducer = combineReducers({
  counter: counterReducer,
  user: userReducer
});
const store = createStore(rootReducer);

// 4. ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©
import { useSelector, useDispatch } from 'react-redux';

const Counter = () => {
  const count = useSelector(state => state.counter.value);
  const dispatch = useDispatch();
  
  return (
    <div>
      <span>{count}</span>
      <button onClick={() => dispatch(increment())}>+</button>
      <button onClick={() => dispatch(decrement())}>-</button>
    </div>
  );
};
```

**Reduxì˜ ë¬¸ì œì :**
- ğŸ“ **ë„ˆë¬´ ë§ì€ ì½”ë“œ**: ê°„ë‹¨í•œ ìƒíƒœ í•˜ë‚˜ì—ë„ ìˆ˜ì‹­ ì¤„
- ğŸ”„ **ë³µì¡í•œ í”Œë¡œìš°**: Action â†’ Reducer â†’ Store â†’ Component
- ğŸ§© **íŒŒì¼ ë¶„ì‚°**: actions, reducers, selectors ë“± ì—¬ëŸ¬ íŒŒì¼
- ğŸ“š **í•™ìŠµ ê³¡ì„ **: ì´ˆë³´ìê°€ ì´í•´í•˜ê¸° ì–´ë ¤ì›€

### Zustandì˜ ê°„ë‹¨í•¨

```tsx
// ğŸ˜ Zustand - ë‹¨ìˆœí•˜ê³  ì§ê´€ì 
import { create } from 'zustand';

interface AppState {
  // ì¹´ìš´í„° ìƒíƒœ
  count: number;
  increment: () => void;
  decrement: () => void;
  reset: () => void;
  
  // ì‚¬ìš©ì ìƒíƒœ
  user: {
    name: string;
    email: string;
  } | null;
  setUser: (user: { name: string; email: string }) => void;
  logout: () => void;
  
  // UI ìƒíƒœ
  theme: 'light' | 'dark';
  toggleTheme: () => void;
}

// ğŸ˜ í•˜ë‚˜ì˜ ìŠ¤í† ì–´ì—ì„œ ëª¨ë“  ìƒíƒœì™€ ì•¡ì…˜ ê´€ë¦¬
const useAppStore = create<AppState>((set, get) => ({
  // ì¹´ìš´í„°
  count: 0,
  increment: () => set((state) => ({ count: state.count + 1 })),
  decrement: () => set((state) => ({ count: state.count - 1 })),
  reset: () => set({ count: 0 }),
  
  // ì‚¬ìš©ì
  user: null,
  setUser: (user) => set({ user }),
  logout: () => set({ user: null }),
  
  // í…Œë§ˆ
  theme: 'light',
  toggleTheme: () => set((state) => ({ 
    theme: state.theme === 'light' ? 'dark' : 'light' 
  }))
}));

// ğŸ˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ ê°„ë‹¨í•˜ê²Œ ì‚¬ìš©
const Counter: React.FC = () => {
  const { count, increment, decrement, reset } = useAppStore();
  
  return (
    <div className="counter">
      <h2>ì¹´ìš´í„°: {count}</h2>
      <div className="buttons">
        <button onClick={increment}>+1</button>
        <button onClick={decrement}>-1</button>
        <button onClick={reset}>ë¦¬ì…‹</button>
      </div>
    </div>
  );
};

const UserProfile: React.FC = () => {
  const { user, setUser, logout } = useAppStore();
  const [name, setName] = useState('');
  const [email, setEmail] = useState('');
  
  const handleLogin = (e: React.FormEvent) => {
    e.preventDefault();
    if (name && email) {
      setUser({ name, email });
      setName('');
      setEmail('');
    }
  };
  
  if (user) {
    return (
      <div className="user-profile">
        <h3>í™˜ì˜í•©ë‹ˆë‹¤, {user.name}ë‹˜!</h3>
        <p>ì´ë©”ì¼: {user.email}</p>
        <button onClick={logout}>ë¡œê·¸ì•„ì›ƒ</button>
      </div>
    );
  }
  
  return (
    <form onSubmit={handleLogin} className="login-form">
      <h3>ë¡œê·¸ì¸</h3>
      <input
        type="text"
        placeholder="ì´ë¦„"
        value={name}
        onChange={(e) => setName(e.target.value)}
      />
      <input
        type="email"
        placeholder="ì´ë©”ì¼"
        value={email}
        onChange={(e) => setEmail(e.target.value)}
      />
      <button type="submit">ë¡œê·¸ì¸</button>
    </form>
  );
};
```

**Zustandì˜ ì¥ì :**
- âœ… **ê°„ë‹¨í•œ API**: create í•¨ìˆ˜ í•˜ë‚˜ë¡œ ìŠ¤í† ì–´ ìƒì„±
- âœ… **ì ì€ ì½”ë“œ**: Redux ëŒ€ë¹„ 80% ì½”ë“œ ê°ì†Œ
- âœ… **TypeScript ì¹œí™”ì **: ì™„ë²½í•œ íƒ€ì… ì§€ì›
- âœ… **ì„±ëŠ¥ ìµœì í™”**: í•„ìš”í•œ ìƒíƒœë§Œ êµ¬ë…
- âœ… **í•™ìŠµ ê³¡ì„ **: 5ë¶„ì´ë©´ ìµí ìˆ˜ ìˆìŒ

---

## ğŸª Zustand ì™„ì „ í™œìš©ë²•

### ê¸°ë³¸ ìŠ¤í† ì–´ êµ¬ì¡°

```tsx
import { create } from 'zustand';
import { persist, createJSONStorage } from 'zustand/middleware';

interface Todo {
  id: number;
  text: string;
  completed: boolean;
  createdAt: Date;
}

interface Filter {
  status: 'all' | 'active' | 'completed';
  search: string;
}

interface TodoState {
  // ìƒíƒœ
  todos: Todo[];
  filter: Filter;
  
  // ì•¡ì…˜
  addTodo: (text: string) => void;
  toggleTodo: (id: number) => void;
  deleteTodo: (id: number) => void;
  updateTodo: (id: number, text: string) => void;
  clearCompleted: () => void;
  
  // í•„í„°
  setFilter: (filter: Partial<Filter>) => void;
  
  // ê³„ì‚°ëœ ê°’ë“¤
  filteredTodos: Todo[];
  stats: {
    total: number;
    active: number;
    completed: number;
  };
}

export const useTodoStore = create<TodoState>()(
  persist(
    (set, get) => ({
      // ì´ˆê¸° ìƒíƒœ
      todos: [],
      filter: { status: 'all', search: '' },
      
      // í• ì¼ ê´€ë¦¬ ì•¡ì…˜
      addTodo: (text) => {
        const newTodo: Todo = {
          id: Date.now(),
          text: text.trim(),
          completed: false,
          createdAt: new Date()
        };
        set((state) => ({
          todos: [newTodo, ...state.todos]
        }));
      },
      
      toggleTodo: (id) => set((state) => ({
        todos: state.todos.map(todo =>
          todo.id === id ? { ...todo, completed: !todo.completed } : todo
        )
      })),
      
      deleteTodo: (id) => set((state) => ({
        todos: state.todos.filter(todo => todo.id !== id)
      })),
      
      updateTodo: (id, text) => set((state) => ({
        todos: state.todos.map(todo =>
          todo.id === id ? { ...todo, text: text.trim() } : todo
        )
      })),
      
      clearCompleted: () => set((state) => ({
        todos: state.todos.filter(todo => !todo.completed)
      })),
      
      // í•„í„° ì•¡ì…˜
      setFilter: (newFilter) => set((state) => ({
        filter: { ...state.filter, ...newFilter }
      })),
      
      // ğŸ˜ ê³„ì‚°ëœ ê°’ë“¤ - getter í˜•íƒœë¡œ êµ¬í˜„
      get filteredTodos() {
        const { todos, filter } = get();
        let filtered = todos;
        
        // ìƒíƒœ í•„í„°ë§
        if (filter.status === 'active') {
          filtered = filtered.filter(todo => !todo.completed);
        } else if (filter.status === 'completed') {
          filtered = filtered.filter(todo => todo.completed);
        }
        
        // ê²€ìƒ‰ í•„í„°ë§
        if (filter.search) {
          filtered = filtered.filter(todo =>
            todo.text.toLowerCase().includes(filter.search.toLowerCase())
          );
        }
        
        return filtered;
      },
      
      get stats() {
        const { todos } = get();
        return {
          total: todos.length,
          active: todos.filter(todo => !todo.completed).length,
          completed: todos.filter(todo => todo.completed).length
        };
      }
    }),
    {
      name: 'todo-storage', // ë¡œì»¬ìŠ¤í† ë¦¬ì§€ í‚¤
      storage: createJSONStorage(() => localStorage),
      // Date ê°ì²´ ì§ë ¬í™” ë¬¸ì œ í•´ê²°
      serialize: (state) => JSON.stringify(state, (key, value) => {
        if (key === 'createdAt' && value instanceof Date) {
          return value.toISOString();
        }
        return value;
      }),
      deserialize: (str) => {
        const parsed = JSON.parse(str);
        // Date ê°ì²´ ë³µì›
        if (parsed.state?.todos) {
          parsed.state.todos = parsed.state.todos.map((todo: any) => ({
            ...todo,
            createdAt: new Date(todo.createdAt)
          }));
        }
        return parsed;
      }
    }
  )
);
```

### ì»´í¬ë„ŒíŠ¸ì—ì„œ ì„ íƒì  êµ¬ë…

```tsx
// ğŸ˜ í•„ìš”í•œ ìƒíƒœë§Œ êµ¬ë…í•´ì„œ ì„±ëŠ¥ ìµœì í™”
const TodoApp: React.FC = () => {
  // ê° ì»´í¬ë„ŒíŠ¸ëŠ” í•„ìš”í•œ ìƒíƒœë§Œ êµ¬ë…
  const addTodo = useTodoStore((state) => state.addTodo);
  const filter = useTodoStore((state) => state.filter);
  const setFilter = useTodoStore((state) => state.setFilter);
  
  const [inputText, setInputText] = useState('');
  
  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    if (inputText.trim()) {
      addTodo(inputText);
      setInputText('');
    }
  };
  
  return (
    <div className="todo-app">
      <header className="todo-header">
        <h1>ğŸ“ í• ì¼ ê´€ë¦¬</h1>
        
        {/* ìƒˆ í• ì¼ ì…ë ¥ */}
        <form onSubmit={handleSubmit} className="add-todo-form">
          <input
            type="text"
            value={inputText}
            onChange={(e) => setInputText(e.target.value)}
            placeholder="ìƒˆ í• ì¼ì„ ì…ë ¥í•˜ì„¸ìš”..."
            className="add-todo-input"
          />
          <button type="submit" disabled={!inputText.trim()}>
            ì¶”ê°€
          </button>
        </form>
        
        {/* í•„í„° ë° ê²€ìƒ‰ */}
        <div className="filters">
          <div className="status-filter">
            <button
              className={filter.status === 'all' ? 'active' : ''}
              onClick={() => setFilter({ status: 'all' })}
            >
              ì „ì²´
            </button>
            <button
              className={filter.status === 'active' ? 'active' : ''}
              onClick={() => setFilter({ status: 'active' })}
            >
              ì§„í–‰ì¤‘
            </button>
            <button
              className={filter.status === 'completed' ? 'active' : ''}
              onClick={() => setFilter({ status: 'completed' })}
            >
              ì™„ë£Œë¨
            </button>
          </div>
          
          <input
            type="text"
            placeholder="í• ì¼ ê²€ìƒ‰..."
            value={filter.search}
            onChange={(e) => setFilter({ search: e.target.value })}
            className="search-input"
          />
        </div>
      </header>
      
      <main>
        <TodoList />
        <TodoStats />
      </main>
    </div>
  );
};

// ğŸ˜ ê° ì»´í¬ë„ŒíŠ¸ê°€ ë…ë¦½ì ìœ¼ë¡œ ìƒíƒœ êµ¬ë…
const TodoList: React.FC = () => {
  const filteredTodos = useTodoStore((state) => state.filteredTodos);
  const toggleTodo = useTodoStore((state) => state.toggleTodo);
  const deleteTodo = useTodoStore((state) => state.deleteTodo);
  
  if (filteredTodos.length === 0) {
    return (
      <div className="empty-state">
        <p>í• ì¼ì´ ì—†ìŠµë‹ˆë‹¤. ìƒˆë¡œìš´ í• ì¼ì„ ì¶”ê°€í•´ë³´ì„¸ìš”! ğŸ“</p>
      </div>
    );
  }
  
  return (
    <ul className="todo-list">
      {filteredTodos.map((todo) => (
        <TodoItem
          key={todo.id}
          todo={todo}
          onToggle={() => toggleTodo(todo.id)}
          onDelete={() => deleteTodo(todo.id)}
        />
      ))}
    </ul>
  );
};

const TodoItem: React.FC<{
  todo: Todo;
  onToggle: () => void;
  onDelete: () => void;
}> = ({ todo, onToggle, onDelete }) => {
  const [isEditing, setIsEditing] = useState(false);
  const [editText, setEditText] = useState(todo.text);
  const updateTodo = useTodoStore((state) => state.updateTodo);
  
  const handleSave = () => {
    if (editText.trim() && editText !== todo.text) {
      updateTodo(todo.id, editText);
    }
    setIsEditing(false);
  };
  
  const handleCancel = () => {
    setEditText(todo.text);
    setIsEditing(false);
  };
  
  return (
    <li className={`todo-item ${todo.completed ? 'completed' : ''}`}>
      <input
        type="checkbox"
        checked={todo.completed}
        onChange={onToggle}
        className="todo-checkbox"
      />
      
      {isEditing ? (
        <div className="todo-edit">
          <input
            type="text"
            value={editText}
            onChange={(e) => setEditText(e.target.value)}
            onKeyDown={(e) => {
              if (e.key === 'Enter') handleSave();
              if (e.key === 'Escape') handleCancel();
            }}
            autoFocus
          />
          <button onClick={handleSave}>ì €ì¥</button>
          <button onClick={handleCancel}>ì·¨ì†Œ</button>
        </div>
      ) : (
        <div className="todo-content">
          <span className="todo-text" onDoubleClick={() => setIsEditing(true)}>
            {todo.text}
          </span>
          <small className="todo-date">
            {todo.createdAt.toLocaleDateString('ko-KR')}
          </small>
        </div>
      )}
      
      <div className="todo-actions">
        {!isEditing && (
          <>
            <button onClick={() => setIsEditing(true)}>ìˆ˜ì •</button>
            <button onClick={onDelete} className="delete-btn">ì‚­ì œ</button>
          </>
        )}
      </div>
    </li>
  );
};

const TodoStats: React.FC = () => {
  const stats = useTodoStore((state) => state.stats);
  const clearCompleted = useTodoStore((state) => state.clearCompleted);
  
  return (
    <div className="todo-stats">
      <div className="stats-info">
        <span>ì „ì²´: {stats.total}ê°œ</span>
        <span>ì§„í–‰ì¤‘: {stats.active}ê°œ</span>
        <span>ì™„ë£Œ: {stats.completed}ê°œ</span>
      </div>
      
      {stats.completed > 0 && (
        <button onClick={clearCompleted} className="clear-completed">
          ì™„ë£Œëœ í•­ëª© ì‚­ì œ ({stats.completed}ê°œ)
        </button>
      )}
      
      {stats.total > 0 && (
        <div className="progress-bar">
          <div 
            className="progress-fill"
            style={{ 
              width: `${(stats.completed / stats.total) * 100}%` 
            }}
          />
          <span className="progress-text">
            {Math.round((stats.completed / stats.total) * 100)}% ì™„ë£Œ
          </span>
        </div>
      )}
    </div>
  );
};
```

---

## ğŸ†š Context API vs Zustand ë¹„êµ

### Context APIì˜ í•œê³„

```tsx
// ğŸ˜¢ Context API - Provider ì§€ì˜¥ê³¼ ì„±ëŠ¥ ë¬¸ì œ
const ThemeContext = createContext();
const UserContext = createContext();
const NotificationContext = createContext();
const ShoppingCartContext = createContext();

function App() {
  return (
    <ThemeProvider>
      <UserProvider>
        <NotificationProvider>
          <ShoppingCartProvider>
            <Router>
              <Routes>
                <Route path="/" element={<HomePage />} />
              </Routes>
            </Router>
          </ShoppingCartProvider>
        </NotificationProvider>
      </UserProvider>
    </ThemeProvider>
  );
}

// ëª¨ë“  ìƒíƒœê°€ ë°”ë€” ë•Œë§ˆë‹¤ ì „ì²´ í•˜ìœ„ íŠ¸ë¦¬ê°€ ë¦¬ë Œë”ë§ë¨
const UserProvider = ({ children }) => {
  const [user, setUser] = useState(null);
  const [theme, setTheme] = useState('light');
  const [notifications, setNotifications] = useState([]);
  
  // userê°€ ë°”ë€Œë©´ themeê³¼ notificationsë¥¼ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë„ ë¦¬ë Œë”ë§
  return (
    <UserContext.Provider value={{ user, setUser, theme, setTheme, notifications, setNotifications }}>
      {children}
    </UserContext.Provider>
  );
};
```

### Zustandì˜ ìš°ì›”ì„±

```tsx
// ğŸ˜ Zustand - ê¹”ë”í•˜ê³  íš¨ìœ¨ì 
import { create } from 'zustand';
import { subscribeWithSelector } from 'zustand/middleware';

interface AppStore {
  // í…Œë§ˆ ê´€ë¦¬
  theme: 'light' | 'dark';
  toggleTheme: () => void;
  
  // ì‚¬ìš©ì ê´€ë¦¬
  user: User | null;
  login: (user: User) => void;
  logout: () => void;
  
  // ì•Œë¦¼ ê´€ë¦¬
  notifications: Notification[];
  addNotification: (notification: Omit<Notification, 'id'>) => void;
  removeNotification: (id: string) => void;
  
  // ì‡¼í•‘ì¹´íŠ¸ ê´€ë¦¬
  cart: CartItem[];
  addToCart: (product: Product) => void;
  removeFromCart: (productId: number) => void;
  updateQuantity: (productId: number, quantity: number) => void;
}

const useAppStore = create<AppStore>()(
  subscribeWithSelector((set, get) => ({
    // í…Œë§ˆ
    theme: 'light',
    toggleTheme: () => set((state) => ({ 
      theme: state.theme === 'light' ? 'dark' : 'light' 
    })),
    
    // ì‚¬ìš©ì
    user: null,
    login: (user) => {
      set({ user });
      // ë¡œê·¸ì¸ì‹œ í™˜ì˜ ì•Œë¦¼ ì¶”ê°€
      get().addNotification({
        type: 'success',
        title: 'ë¡œê·¸ì¸ ì„±ê³µ',
        message: `í™˜ì˜í•©ë‹ˆë‹¤, ${user.name}ë‹˜!`
      });
    },
    logout: () => {
      set({ user: null, cart: [] }); // ë¡œê·¸ì•„ì›ƒì‹œ ì¹´íŠ¸ë„ ë¹„ìš°ê¸°
      get().addNotification({
        type: 'info',
        title: 'ë¡œê·¸ì•„ì›ƒ',
        message: 'ì•ˆì „í•˜ê²Œ ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤.'
      });
    },
    
    // ì•Œë¦¼
    notifications: [],
    addNotification: (notification) => {
      const newNotification = {
        ...notification,
        id: Date.now().toString(),
        timestamp: new Date()
      };
      set((state) => ({ 
        notifications: [newNotification, ...state.notifications] 
      }));
      
      // 5ì´ˆ í›„ ìë™ ì œê±°
      setTimeout(() => {
        get().removeNotification(newNotification.id);
      }, 5000);
    },
    removeNotification: (id) => set((state) => ({
      notifications: state.notifications.filter(n => n.id !== id)
    })),
    
    // ì‡¼í•‘ì¹´íŠ¸
    cart: [],
    addToCart: (product) => {
      set((state) => {
        const existingItem = state.cart.find(item => item.productId === product.id);
        if (existingItem) {
          return {
            cart: state.cart.map(item =>
              item.productId === product.id
                ? { ...item, quantity: item.quantity + 1 }
                : item
            )
          };
        } else {
          return {
            cart: [...state.cart, { 
              productId: product.id, 
              product, 
              quantity: 1 
            }]
          };
        }
      });
      
      get().addNotification({
        type: 'success',
        title: 'ìƒí’ˆ ì¶”ê°€ë¨',
        message: `${product.name}ì´(ê°€) ì¥ë°”êµ¬ë‹ˆì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.`
      });
    },
    
    removeFromCart: (productId) => set((state) => ({
      cart: state.cart.filter(item => item.productId !== productId)
    })),
    
    updateQuantity: (productId, quantity) => set((state) => ({
      cart: quantity > 0 
        ? state.cart.map(item =>
            item.productId === productId 
              ? { ...item, quantity }
              : item
          )
        : state.cart.filter(item => item.productId !== productId)
    }))
  }))
);

// ğŸ˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ í•„ìš”í•œ ìƒíƒœë§Œ ì„ íƒì  êµ¬ë…
const Header: React.FC = () => {
  // í…Œë§ˆ ìƒíƒœê°€ ë³€ê²½ë  ë•Œë§Œ ë¦¬ë Œë”ë§
  const theme = useAppStore((state) => state.theme);
  const toggleTheme = useAppStore((state) => state.toggleTheme);
  
  return (
    <header className={`header ${theme}`}>
      <button onClick={toggleTheme}>
        {theme === 'light' ? 'ğŸŒ™' : 'â˜€ï¸'}
      </button>
      <UserMenu />
      <CartIcon />
    </header>
  );
};

const UserMenu: React.FC = () => {
  // ì‚¬ìš©ì ìƒíƒœê°€ ë³€ê²½ë  ë•Œë§Œ ë¦¬ë Œë”ë§
  const user = useAppStore((state) => state.user);
  const logout = useAppStore((state) => state.logout);
  
  if (!user) {
    return <LoginButton />;
  }
  
  return (
    <div className="user-menu">
      <span>ì•ˆë…•í•˜ì„¸ìš”, {user.name}ë‹˜!</span>
      <button onClick={logout}>ë¡œê·¸ì•„ì›ƒ</button>
    </div>
  );
};

const CartIcon: React.FC = () => {
  // ì¹´íŠ¸ ì•„ì´í…œ ê°œìˆ˜ë§Œ êµ¬ë… (íš¨ìœ¨ì !)
  const itemCount = useAppStore((state) => 
    state.cart.reduce((sum, item) => sum + item.quantity, 0)
  );
  
  return (
    <div className="cart-icon">
      ğŸ›’ 
      {itemCount > 0 && <span className="badge">{itemCount}</span>}
    </div>
  );
};
```

**Context API vs Zustand ë¹„êµí‘œ:**

| íŠ¹ì„± | Context API | Zustand |
|------|-------------|---------|
| **ì„¤ì • ë³µì¡ë„** | ë†’ìŒ (Provider ì§€ì˜¥) | ë‚®ìŒ (create í•¨ìˆ˜ í•˜ë‚˜) |
| **ì„±ëŠ¥** | ë‚®ìŒ (ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§) | ë†’ìŒ (ì„ íƒì  êµ¬ë…) |
| **TypeScript ì§€ì›** | ë³µì¡í•¨ | ì™„ë²½í•¨ |
| **ê°œë°œì ë„êµ¬** | ê¸°ë³¸ ì œê³µ ì•ˆë¨ | Redux DevTools í˜¸í™˜ |
| **ë²ˆë“¤ í¬ê¸°** | 0 (React ë‚´ì¥) | 9.7kb |
| **í•™ìŠµ ê³¡ì„ ** | ë³´í†µ | ë§¤ìš° ì‰¬ì›€ |
| **ìƒíƒœ ì§€ì†ì„±** | ì§ì ‘ êµ¬í˜„ | ë¯¸ë“¤ì›¨ì–´ë¡œ ì œê³µ |

---

## ğŸ¯ ê³ ê¸‰ íŒ¨í„´: Container/Presentational

### Presentational Components (ë©ì²­í•œ ì»´í¬ë„ŒíŠ¸)

```tsx
// ğŸ˜ ìˆœìˆ˜í•œ UI ì»´í¬ë„ŒíŠ¸ - ìƒíƒœë¥¼ ëª¨ë¦„, ì¬ì‚¬ìš© ê°€ëŠ¥
interface ProductCardProps {
  product: {
    id: number;
    name: string;
    price: number;
    image: string;
    inStock: boolean;
  };
  onAddToCart: () => void;
  onToggleFavorite: () => void;
  isFavorite: boolean;
  isInCart: boolean;
}

const ProductCard: React.FC<ProductCardProps> = ({
  product,
  onAddToCart,
  onToggleFavorite,
  isFavorite,
  isInCart
}) => {
  return (
    <div className="product-card">
      <div className="product-image">
        <img src={product.image} alt={product.name} />
        <button 
          className={`favorite-btn ${isFavorite ? 'active' : ''}`}
          onClick={onToggleFavorite}
        >
          {isFavorite ? 'â¤ï¸' : 'ğŸ¤'}
        </button>
      </div>
      
      <div className="product-info">
        <h3>{product.name}</h3>
        <p className="price">{product.price.toLocaleString()}ì›</p>
        
        <div className="product-status">
          {product.inStock ? (
            <span className="in-stock">ì¬ê³  ìˆìŒ</span>
          ) : (
            <span className="out-of-stock">í’ˆì ˆ</span>
          )}
        </div>
        
        <button
          className={`add-to-cart-btn ${isInCart ? 'added' : ''}`}
          onClick={onAddToCart}
          disabled={!product.inStock}
        >
          {isInCart ? 'ì¥ë°”êµ¬ë‹ˆì— ë‹´ìŒ âœ“' : 'ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€'}
        </button>
      </div>
    </div>
  );
};

interface ProductListProps {
  products: Product[];
  loading: boolean;
  error: string | null;
  onAddToCart: (product: Product) => void;
  onToggleFavorite: (productId: number) => void;
  favorites: number[];
  cartItems: number[];
}

const ProductList: React.FC<ProductListProps> = ({
  products,
  loading,
  error,
  onAddToCart,
  onToggleFavorite,
  favorites,
  cartItems
}) => {
  if (loading) {
    return (
      <div className="loading-state">
        <div className="spinner" />
        <p>ìƒí’ˆì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
      </div>
    );
  }
  
  if (error) {
    return (
      <div className="error-state">
        <h3>ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤</h3>
        <p>{error}</p>
      </div>
    );
  }
  
  if (products.length === 0) {
    return (
      <div className="empty-state">
        <h3>ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤</h3>
        <p>ë‹¤ë¥¸ ì¹´í…Œê³ ë¦¬ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”.</p>
      </div>
    );
  }
  
  return (
    <div className="product-grid">
      {products.map(product => (
        <ProductCard
          key={product.id}
          product={product}
          onAddToCart={() => onAddToCart(product)}
          onToggleFavorite={() => onToggleFavorite(product.id)}
          isFavorite={favorites.includes(product.id)}
          isInCart={cartItems.includes(product.id)}
        />
      ))}
    </div>
  );
};
```

### Container Components (ë˜‘ë˜‘í•œ ì»´í¬ë„ŒíŠ¸)

```tsx
// ğŸ˜ ìƒíƒœì™€ ë¡œì§ì„ ë‹´ë‹¹í•˜ëŠ” ì»¨í…Œì´ë„ˆ ì»´í¬ë„ŒíŠ¸
interface ShopState {
  // ìƒí’ˆ ê´€ë¦¬
  products: Product[];
  loading: boolean;
  error: string | null;
  fetchProducts: (category?: string) => Promise<void>;
  
  // ì¦ê²¨ì°¾ê¸° ê´€ë¦¬
  favorites: number[];
  toggleFavorite: (productId: number) => void;
  
  // ì¥ë°”êµ¬ë‹ˆ ê´€ë¦¬
  cart: CartItem[];
  addToCart: (product: Product) => void;
}

const useShopStore = create<ShopState>((set, get) => ({
  // ìƒí’ˆ ìƒíƒœ
  products: [],
  loading: false,
  error: null,
  
  fetchProducts: async (category) => {
    set({ loading: true, error: null });
    try {
      const response = await fetch(`/api/products${category ? `?category=${category}` : ''}`);
      if (!response.ok) {
        throw new Error('ìƒí’ˆì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');
      }
      const products = await response.json();
      set({ products, loading: false });
    } catch (error) {
      set({ 
        products: [], 
        loading: false, 
        error: error instanceof Error ? error.message : 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜' 
      });
    }
  },
  
  // ì¦ê²¨ì°¾ê¸°
  favorites: [],
  toggleFavorite: (productId) => set((state) => ({
    favorites: state.favorites.includes(productId)
      ? state.favorites.filter(id => id !== productId)
      : [...state.favorites, productId]
  })),
  
  // ì¥ë°”êµ¬ë‹ˆ
  cart: [],
  addToCart: (product) => {
    set((state) => {
      const existingItem = state.cart.find(item => item.product.id === product.id);
      if (existingItem) {
        return {
          cart: state.cart.map(item =>
            item.product.id === product.id
              ? { ...item, quantity: item.quantity + 1 }
              : item
          )
        };
      } else {
        return {
          cart: [...state.cart, { product, quantity: 1 }]
        };
      }
    });
  }
}));

// ğŸ˜ Container Component - ìƒíƒœì™€ ë¡œì§ ê´€ë¦¬
const ProductListContainer: React.FC<{ category?: string }> = ({ category }) => {
  const {
    products,
    loading,
    error,
    favorites,
    cart,
    fetchProducts,
    toggleFavorite,
    addToCart
  } = useShopStore();
  
  // ì¹´í…Œê³ ë¦¬ ë³€ê²½ì‹œ ìƒí’ˆ ë‹¤ì‹œ ë¡œë”©
  useEffect(() => {
    fetchProducts(category);
  }, [category, fetchProducts]);
  
  // ì¥ë°”êµ¬ë‹ˆì— ìˆëŠ” ìƒí’ˆ ID ëª©ë¡ ê³„ì‚°
  const cartProductIds = useMemo(() => 
    cart.map(item => item.product.id),
    [cart]
  );
  
  // ğŸ˜ Presentational ì»´í¬ë„ŒíŠ¸ì— props ì „ë‹¬
  return (
    <ProductList
      products={products}
      loading={loading}
      error={error}
      onAddToCart={addToCart}
      onToggleFavorite={toggleFavorite}
      favorites={favorites}
      cartItems={cartProductIds}
    />
  );
};

// ğŸ˜ ìµœì¢… ì‚¬ìš©
const ShopPage: React.FC = () => {
  const [selectedCategory, setSelectedCategory] = useState<string>('');
  
  return (
    <div className="shop-page">
      <header>
        <h1>ì˜¨ë¼ì¸ ìŠ¤í† ì–´</h1>
        <CategoryFilter 
          selectedCategory={selectedCategory}
          onSelectCategory={setSelectedCategory}
        />
      </header>
      
      <main>
        <ProductListContainer category={selectedCategory} />
      </main>
    </div>
  );
};
```

**Container/Presentational íŒ¨í„´ì˜ ì¥ì :**
- âœ… **ê´€ì‹¬ì‚¬ ë¶„ë¦¬**: UIì™€ ë¡œì§ì´ ëª…í™•íˆ ë¶„ë¦¬
- âœ… **ì¬ì‚¬ìš©ì„±**: Presentational ì»´í¬ë„ŒíŠ¸ëŠ” ì–´ë””ì„œë“  ì¬ì‚¬ìš© ê°€ëŠ¥
- âœ… **í…ŒìŠ¤íŠ¸ ìš©ì´**: UIì™€ ë¡œì§ì„ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸
- âœ… **í˜‘ì—… íš¨ìœ¨**: ë””ìì´ë„ˆëŠ” UI, ê°œë°œìëŠ” ë¡œì§ì— ì§‘ì¤‘

---

## ğŸš€ ì‹¤ì „ í”„ë¡œì íŠ¸: ì „ììƒê±°ë˜ ì•±

ì´ì œ ëª¨ë“  íŒ¨í„´ì„ í™œìš©í•´ì„œ ì‹¤ì œ ì „ììƒê±°ë˜ ì•±ì„ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤!

```tsx
// ğŸ“ stores/useEcommerceStore.ts
import { create } from 'zustand';
import { persist, createJSONStorage } from 'zustand/middleware';

interface Product {
  id: number;
  name: string;
  price: number;
  image: string;
  category: string;
  description: string;
  inStock: boolean;
  rating: number;
}

interface CartItem {
  product: Product;
  quantity: number;
}

interface User {
  id: number;
  name: string;
  email: string;
  address?: string;
}

interface EcommerceState {
  // ì‚¬ìš©ì ê´€ë¦¬
  user: User | null;
  login: (user: User) => void;
  logout: () => void;
  
  // ìƒí’ˆ ê´€ë¦¬
  products: Product[];
  searchTerm: string;
  selectedCategory: string;
  loading: boolean;
  error: string | null;
  
  // ìƒí’ˆ ì•¡ì…˜
  setProducts: (products: Product[]) => void;
  setSearchTerm: (term: string) => void;
  setSelectedCategory: (category: string) => void;
  setLoading: (loading: boolean) => void;
  setError: (error: string | null) => void;
  
  // ì¥ë°”êµ¬ë‹ˆ ê´€ë¦¬
  cart: CartItem[];
  addToCart: (product: Product, quantity?: number) => void;
  removeFromCart: (productId: number) => void;
  updateQuantity: (productId: number, quantity: number) => void;
  clearCart: () => void;
  
  // ì¦ê²¨ì°¾ê¸°
  favorites: number[];
  toggleFavorite: (productId: number) => void;
  
  // ì£¼ë¬¸ ê´€ë¦¬
  orders: Order[];
  createOrder: (orderData: Omit<Order, 'id' | 'createdAt'>) => void;
  
  // ê³„ì‚°ëœ ê°’ë“¤
  get filteredProducts(): Product[];
  get cartTotal(): number;
  get cartItemCount(): number;
}

export const useEcommerceStore = create<EcommerceState>()(
  persist(
    (set, get) => ({
      // ì‚¬ìš©ì
      user: null,
      login: (user) => set({ user }),
      logout: () => set({ user: null, cart: [], orders: [] }),
      
      // ìƒí’ˆ
      products: [],
      searchTerm: '',
      selectedCategory: '',
      loading: false,
      error: null,
      
      setProducts: (products) => set({ products, loading: false, error: null }),
      setSearchTerm: (searchTerm) => set({ searchTerm }),
      setSelectedCategory: (selectedCategory) => set({ selectedCategory }),
      setLoading: (loading) => set({ loading }),
      setError: (error) => set({ error, loading: false }),
      
      // ì¥ë°”êµ¬ë‹ˆ
      cart: [],
      addToCart: (product, quantity = 1) => {
        set((state) => {
          const existingItem = state.cart.find(item => item.product.id === product.id);
          if (existingItem) {
            return {
              cart: state.cart.map(item =>
                item.product.id === product.id
                  ? { ...item, quantity: item.quantity + quantity }
                  : item
              )
            };
          } else {
            return {
              cart: [...state.cart, { product, quantity }]
            };
          }
        });
      },
      
      removeFromCart: (productId) => set((state) => ({
        cart: state.cart.filter(item => item.product.id !== productId)
      })),
      
      updateQuantity: (productId, quantity) => {
        if (quantity <= 0) {
          get().removeFromCart(productId);
          return;
        }
        
        set((state) => ({
          cart: state.cart.map(item =>
            item.product.id === productId
              ? { ...item, quantity }
              : item
          )
        }));
      },
      
      clearCart: () => set({ cart: [] }),
      
      // ì¦ê²¨ì°¾ê¸°
      favorites: [],
      toggleFavorite: (productId) => set((state) => ({
        favorites: state.favorites.includes(productId)
          ? state.favorites.filter(id => id !== productId)
          : [...state.favorites, productId]
      })),
      
      // ì£¼ë¬¸
      orders: [],
      createOrder: (orderData) => {
        const newOrder = {
          ...orderData,
          id: Date.now(),
          createdAt: new Date()
        };
        set((state) => ({
          orders: [newOrder, ...state.orders],
          cart: [] // ì£¼ë¬¸ í›„ ì¥ë°”êµ¬ë‹ˆ ë¹„ìš°ê¸°
        }));
      },
      
      // ê³„ì‚°ëœ ê°’ë“¤
      get filteredProducts() {
        const { products, searchTerm, selectedCategory } = get();
        let filtered = products;
        
        if (selectedCategory) {
          filtered = filtered.filter(p => p.category === selectedCategory);
        }
        
        if (searchTerm) {
          filtered = filtered.filter(p =>
            p.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
            p.description.toLowerCase().includes(searchTerm.toLowerCase())
          );
        }
        
        return filtered;
      },
      
      get cartTotal() {
        const { cart } = get();
        return cart.reduce((total, item) => 
          total + (item.product.price * item.quantity), 0
        );
      },
      
      get cartItemCount() {
        const { cart } = get();
        return cart.reduce((count, item) => count + item.quantity, 0);
      }
    }),
    {
      name: 'ecommerce-storage',
      storage: createJSONStorage(() => localStorage),
      // ì‚¬ìš©ì ì •ë³´ì™€ ì¥ë°”êµ¬ë‹ˆë§Œ ì €ì¥ (ìƒí’ˆ ëª©ë¡ì€ ì œì™¸)
      partialize: (state) => ({
        user: state.user,
        cart: state.cart,
        favorites: state.favorites,
        orders: state.orders
      })
    }
  )
);

// ğŸ˜ API í˜¸ì¶œì„ ìœ„í•œ ì»¤ìŠ¤í…€ í›…
export const useProductApi = () => {
  const { setProducts, setLoading, setError } = useEcommerceStore();
  
  const fetchProducts = useCallback(async () => {
    setLoading(true);
    try {
      const response = await fetch('/api/products');
      if (!response.ok) throw new Error('ìƒí’ˆì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');
      const products = await response.json();
      setProducts(products);
    } catch (error) {
      setError(error instanceof Error ? error.message : 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜');
    }
  }, [setProducts, setLoading, setError]);
  
  return { fetchProducts };
};
```

---

## âœ… ì²´í¬í¬ì¸íŠ¸

ì´ ê°•ì˜ë¥¼ ì™„ë£Œí–ˆë‹¤ë©´ ë‹¤ìŒì„ í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤:

- [ ] Reduxì™€ Zustandì˜ ì°¨ì´ì ì„ ì„¤ëª…í•˜ê³  Zustandì˜ ì¥ì ì„ í™œìš©
- [ ] Zustandë¡œ ì „ì—­ ìƒíƒœë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬
- [ ] ì„ íƒì  êµ¬ë…ìœ¼ë¡œ ì„±ëŠ¥ ìµœì í™”
- [ ] Context API vs ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¹„êµ ë° ì ì ˆí•œ ì„ íƒ
- [ ] Container/Presentational íŒ¨í„´ìœ¼ë¡œ ê´€ì‹¬ì‚¬ ë¶„ë¦¬
- [ ] ì‹¤ì „ í”„ë¡œì íŠ¸ì—ì„œ ëª¨ë“  íŒ¨í„´ í†µí•© í™œìš©

## ğŸ’¡ í•µì‹¬ ì •ë¦¬

1. **Zustand = Reduxì˜ ê°„ë‹¨í•œ ëŒ€ì•ˆ**
   - 80% ì ì€ ì½”ë“œë¡œ ê°™ì€ ê¸°ëŠ¥
   - ë›°ì–´ë‚œ TypeScript ì§€ì›
   - ì„ íƒì  êµ¬ë…ìœ¼ë¡œ ì„±ëŠ¥ ìµœì í™”

2. **ìƒíƒœ ê´€ë¦¬ ì„ íƒ ê¸°ì¤€**
   - ë‹¨ìˆœí•œ ì „ì—­ ìƒíƒœ â†’ Context API
   - ë³µì¡í•œ ì „ì—­ ìƒíƒœ â†’ Zustand
   - ë§¤ìš° ë³µì¡í•œ ìƒíƒœ â†’ Redux Toolkit

3. **Container/Presentational íŒ¨í„´**
   - UIì™€ ë¡œì§ì˜ ì™„ì „í•œ ë¶„ë¦¬
   - ì¬ì‚¬ìš©ì„±ê³¼ í…ŒìŠ¤íŠ¸ ìš©ì´ì„± ê·¹ëŒ€í™”

<function_calls>
<invoke name="TodoWrite">
<parameter name="todos">[{"content": "Phase 2 \uac15\uc758 4\uac1c \uc81c\uc791", "status": "in_progress", "activeForm": "Phase 2 \uac15\uc758 4\uac1c \uc81c\uc791 \uc911"}, {"content": "4\uac15: React Hooks \ub9c8\uc2a4\ud130 \uc791\uc131", "status": "completed", "activeForm": "4\uac15: React Hooks \ub9c8\uc2a4\ud130 \uc791\uc131 \uc911"}, {"content": "5\uac15: \ubaa8\ub358 \uc0c1\ud0dc \uad00\ub9ac \uc791\uc131", "status": "completed", "activeForm": "5\uac15: \ubaa8\ub358 \uc0c1\ud0dc \uad00\ub9ac \uc791\uc131 \uc911"}, {"content": "6\uac15: \uc2a4\ud0c0\uc77c\ub9c1 & UI \uc791\uc131", "status": "in_progress", "activeForm": "6\uac15: \uc2a4\ud0c0\uc77c\ub9c1 & UI \uc791\uc131 \uc911"}]